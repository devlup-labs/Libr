name: libr
homepage: https://github.com/devlup-labs/Libr
license: Apache-2.0
maintainer: Lakshya Jain <lakshyajainrj19@gmail.com>
description: |
  libr - A Moderated, Censorship-Resilient Social Network Framework
  .
  Libr is a decentralized social network framework that provides
  censorship resistance and moderated communities using blockchain
  technology and distributed systems.

section: net
priority: optional

# Use environment variable for version, fallback to default
version: 1.0.0-beta

arch: x86_64
platform: linux
epoch: 0
release: 1

depends:
  - ca-certificates
  - glibc
  - webkit2gtk-4.1

recommends: []

contents:
  # Main executable
  - src: ./dist/libr-linux-amd64
    dst: /usr/bin/libr
    file_info:
      mode: 0755
      owner: root
      group: root
  
  # Desktop entry file
  - src: ./packaging/libr.desktop
    dst: /usr/share/applications/libr.desktop
    file_info:
      mode: 0644
      owner: root
      group: root
  
  # Main icon for pixmaps (fallback)
  - src: ./packaging/icons/libr.png
    dst: /usr/share/pixmaps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  # Icon theme hierarchy
  - src: ./packaging/icons/hicolor/16x16/apps/libr.png
    dst: /usr/share/icons/hicolor/16x16/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  - src: ./packaging/icons/hicolor/32x32/apps/libr.png
    dst: /usr/share/icons/hicolor/32x32/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  - src: ./packaging/icons/hicolor/48x48/apps/libr.png
    dst: /usr/share/icons/hicolor/48x48/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  - src: ./packaging/icons/hicolor/64x64/apps/libr.png
    dst: /usr/share/icons/hicolor/64x64/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  - src: ./packaging/icons/hicolor/128x128/apps/libr.png
    dst: /usr/share/icons/hicolor/128x128/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  - src: ./packaging/icons/hicolor/256x256/apps/libr.png
    dst: /usr/share/icons/hicolor/256x256/apps/libr.png
    file_info:
      mode: 0644
      owner: root
      group: root
  
  # Create config directory
  - dst: /etc/libr
    type: dir
    file_info:
      mode: 0755
      owner: root
      group: root
  
  # Create data directory
  - dst: /var/lib/libr
    type: dir
    file_info:
      mode: 0755
      owner: root
      group: root
  
  # Create log directory
  - dst: /var/log/libr
    type: dir
    file_info:
      mode: 0755
      owner: root
      group: root

# Post-install and post-remove scripts
scripts:
  postinstall: ./packaging/postinstall.sh
  postremove: ./packaging/postremove.sh

# Arch Linux specific configuration
archlinux:
  # The packager identifies the organization packaging the software
  packager: Lakshya Jain <lakshyajainrj19@gmail.com>
  
  # Arch Linux specific scripts
  scripts:
    # The preupgrade script runs before pacman upgrades the package
    preupgrade: ./packaging/preupgrade.sh
    
    # The postupgrade script runs after pacman upgrades the package  
    postupgrade: ./packaging/postupgrade.sh
